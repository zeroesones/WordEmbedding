!pip install splunk-sdk

import splunklib.client as client
import splunklib.results as results

# Splunk server connection parameters
HOST = "your_splunk_host"
PORT = 8089  # Default port for Splunk
USERNAME = "your_username"
PASSWORD = "your_password"

# Create a Service instance and log in 
service = client.connect(
    host=HOST,
    port=PORT,
    username=USERNAME,
    password=PASSWORD)

# Your search query - this is a basic one
searchquery_normal = "search * | head 10"

# Create a job to perform the search
job = service.jobs.create(searchquery_normal)

# Wait for the job to complete
while True:
    while not job.is_ready():
        pass
    if job["isDone"] == "1":
        break

# Get the results and print them
for result in results.ResultsReader(job.results()):
    print(result)

# Finalize the job
job.finalize()
